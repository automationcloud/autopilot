<template>
    <div class="header-action">
        <div class="header-action__main">
            <i class="header-action__icon"
                :class="icon">
            </i>
            <div class="header-action__type"
                :title="action.type">
                {{ action.type }}
            </div>
            <input type="text"
                class="header-action__label input input--inverse"
                v-model="actionProxy.label"
                placeholder="Action label"
                v-if="action.isLabelEditable()"/>
        </div>
        <div class="header-action__aside">
            <button class="button button--icon frameless button--inverse"
                title="Edit action notes"
                @click="editNotes()"
                @uiactivate="editNotes()"
                tabindex="0">
                <i class="fas fa-edit">
                </i>
            </button>
        </div>
    </div>
</template>

<script>
export default {

    inject: [
        'modals',
    ],

    computed: {

        viewport() {
            return this.app.viewports.scriptEditor;
        },

        action() {
            return this.viewport.getSelectedAction();
        },

        actionProxy() {
            return this.viewport.createActionProxy(this.action);
        },

        icon() {
            return this.app.ui.objects.getActionIcon(this.action.type);
        }

    },

    methods: {

        editNotes() {
            this.modals.show('edit-action-notes');
        }

    },

};
</script>

<style>
.header-action {
    flex: 1;
    display: flex;
}

.header-action__main, .header-action__aside {
    display: flex;
    align-items: center;
    color: var(--ui-color--white);
}

.header-action__main {
    flex: 1;
}

.header-action__aside {
    flex: 0 0 auto;
    padding-left: var(--gap--small);
}

.header-action__type {
    margin: 0 var(--gap--small);
    color: var(--color-blue--400);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}

.layout-item--width--s .header-action__label {
    display: none;
}

.header-action__label {
    flex: 1;
}

.header-action__label::placeholder {
    color: rgba(255,255,255,.5);
}

.header-action__button {
    padding: var(--gap--small);
    color: var(--ui-color--white);
}
</style>
